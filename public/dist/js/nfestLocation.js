var nfest=nfest||{};nfest.location=function(){var t=function(){nfest.location.getUserLocation(),nfest.location.watchLocation(),"/program"==window.location.pathname,nfest.location.eventDistance(),"/detail/:id"==window.location.pathname&&nfest.location.eventDistance()},o=function(){var t=function(){if("/program"==window.location.pathname,!0){var t=document.querySelectorAll(".eventDistance");Array.prototype.forEach.call(t,function(t){t.classList.add("hide")})}},o=function(){nfest.helpers.storageCheck(function(t){var o=document.querySelector(".geolocationAlert"),e=document.querySelector(".subAlert");o.innerHTML+="We kunnen je positie niet bepalen doordat je GPS uitstaat of niet goed werkt, zet deze aan voor optimaal gebruik.";var n=o.querySelector("button");t?null===localStorage.getItem("geoPopup")&&(o.classList.remove("hide"),e.classList.remove("hide"),nfest.helpers.onclick(n,function(){o.classList.add("hide"),e.classList.add("hide"),localStorage.setItem("geoPopup","closed")})):(o.classList.remove("hide"),e.classList.remove("hide"),n.classList.add("hide"))})};navigator.geolocation?nfest.helpers.storageCheck(function(e){function n(t){var o=t.coords.latitude,e=t.coords.longitude,n=[o,e];localStorage.setItem("userCoordinates",n)}function a(){o(),t()}function n(t){t.coords.latitude,t.coords.longitude}function a(){o(),t()}e?null===localStorage.getItem("userCoordinates")&&navigator.geolocation.getCurrentPosition(n,a):navigator.geolocation.getCurrentPosition(n,a)}):(o(),t())},e=function(t){function o(t){var o=t.coords.latitude,e=t.coords.longitude,n=[o,e];localStorage.setItem("userCoordinates",n)}function e(){}if(navigator.geolocation){var n={enableHighAccuracy:!0};navigator.geolocation.watchPosition(o,e,n)}else console.log("Geolocation is turned off or not supported, we cant calculate your location.")},n=function(){nfest.helpers.getData("https://nfest.lisaklein.nl/data",function(o){var e=JSON.parse(o);t(e),setInterval(function(){t(e)},1e4)});var t=function(t){function o(t){var o=t.coords.latitude,n=t.coords.longitude,a=[o,n];localStorage.setItem("userCoordinates",a),e(o,n)}function e(o,e){function i(t,o,e,n,i,c){var r="K",l=Math.PI*o/180,s=Math.PI*n/180,u=e-i,d=Math.PI*u/180,f=Math.sin(l)*Math.sin(s)+Math.cos(l)*Math.cos(s)*Math.cos(d),f=Math.acos(f),f=180*f/Math.PI,f=60*f*1.1515;"K"==r&&(f=1.609344*f),"N"==r&&(f=.8684*f);var g=f.toFixed(2),h=6*g,v=".bikeDist",h=h.toFixed(0);a.push({distance:g}),c.querySelector(v).innerHTML=h+" min"}Array.prototype.forEach.call(n,function(n){for(var a=n.dataset.location,c=0;c<t.length;c++){var r=t[c].slug,l=o,s=e,u=t[c].acf.location.lat,d=t[c].acf.location.lng;a===r&&i(r,l,s,u,d,n)}})}var n=document.querySelectorAll(".eventObj"),a=[];if(null===localStorage.getItem("userCoordinates"))navigator.geolocation.getCurrentPosition(o);else{var i=localStorage.getItem("userCoordinates"),c=i.split(","),r=parseFloat(c[0]),l=parseFloat(c[1]);e(r,l)}}};return{locationLauncher:t,getUserLocation:o,watchLocation:e,eventDistance:n}}(),nfest.location.locationLauncher();