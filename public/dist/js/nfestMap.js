var nfest=nfest||{};nfest.map=function(){var e={mapTypeControlOptions:{mapTypeIds:["Styled"]},zoom:12,scrollwheel:!1,navigationControl:!1,mapTypeControl:!1,disableDefaultUI:!0,scaleControl:!1,mapTypeId:"Styled"},t=new google.maps.Map(document.getElementById("locationMap"),e),o=function(){nfest.map.jsActivate(t),nfest.map.mapStyle(t),nfest.map.watchLocation(t),"/myroute"==window.location.pathname?nfest.map.venueMarkersMyRoute(t):nfest.map.venueMarkersAllLocations(t)},n=function(e){var t=document.getElementById("locationMap");t.classList.remove("hide")},a=function(e){var t=[{featureType:"water",elementType:"geometry",stylers:[{color:"#e9e9e9"},{lightness:17}]},{featureType:"landscape",elementType:"geometry",stylers:[{color:"#f5f5f5"},{lightness:20}]},{featureType:"road.highway",elementType:"geometry.fill",stylers:[{color:"#ffffff"},{lightness:17}]},{featureType:"road.highway",elementType:"geometry.stroke",stylers:[{color:"#ffffff"},{lightness:29},{weight:.2}]},{featureType:"road.arterial",elementType:"geometry",stylers:[{color:"#ffffff"},{lightness:18}]},{featureType:"road.local",elementType:"geometry",stylers:[{color:"#ffffff"},{lightness:16}]},{featureType:"poi",elementType:"geometry",stylers:[{color:"#f5f5f5"},{lightness:21}]},{featureType:"poi.park",elementType:"geometry",stylers:[{color:"#dedede"},{lightness:21}]},{elementType:"labels.text.stroke",stylers:[{visibility:"on"},{color:"#ffffff"},{lightness:16}]},{elementType:"labels.text.fill",stylers:[{saturation:36},{color:"#333333"},{lightness:40}]},{elementType:"labels.icon",stylers:[{visibility:"off"}]},{featureType:"transit",elementType:"geometry",stylers:[{color:"#f2f2f2"},{lightness:19}]},{featureType:"administrative",elementType:"geometry.fill",stylers:[{color:"#fefefe"},{lightness:20}]},{featureType:"administrative",elementType:"geometry.stroke",stylers:[{color:"#fefefe"},{lightness:17},{weight:1.2}]}],o=new google.maps.StyledMapType(t,{name:"Styled"});e.mapTypes.set("Styled",o)},l=function(e){function o(t){var o=t.coords.latitude,n=t.coords.longitude;e.setPosition(new google.maps.LatLng(o,n))}function n(){var e=new google.maps.LatLng(52.391286,4.917583);t.panTo(e)}var a={enableHighAccuracy:!0};navigator.geolocation.watchPosition(o,n,a)},s=function(e){function t(t){nfest.helpers.storageCheck(function(o){var n,a,s=t.coords.latitude,i=t.coords.longitude,r=[s,i];if(o){localStorage.setItem("userCoordinates",r);var r=localStorage.getItem("userCoordinates"),p=r.split(",");n=parseFloat(p[0]),a=parseFloat(p[1])}else n=s,a=i;var g={url:"/img/marker.svg",size:new google.maps.Size(36,57),scaledSize:new google.maps.Size(36,57),origin:new google.maps.Point(0,0)},c=new google.maps.Marker({map:e,icon:g,optimized:!1,title:"Eigen locatie marker"}),f='<div id="content"><p>Uw eigen locatie</p></div>',m=new google.maps.InfoWindow({content:f});google.maps.event.addListener(c,"click",function(){m.setContent(f),m.open(e,c)}),c.setPosition(new google.maps.LatLng(n,a)),e.setCenter({lat:52.391286,lng:4.917583}),l(c)})}function o(){var t=new google.maps.LatLng(52.391286,4.917583);e.panTo(t)}if(navigator.geolocation){var n={enableHighAccuracy:!0};navigator.geolocation.getCurrentPosition(t,o,n)}else{var a=new google.maps.LatLng(52.391286,4.917583);e.panTo(a)}},i=function(e){var t=document.querySelectorAll(".addedToRoute");Array.prototype.forEach.call(t,function(e){e.addEventListener("click",function(){location.reload()})}),nfest.helpers.getVenueLocations(function(t,o){var n=JSON.parse(localStorage.getItem("myRouteEvents")),a=document.getElementById("infoText"),l=new google.maps.InfoWindow;if(null==n&&a.classList.remove("hide"),n)if(0==n.length)a.classList.remove("hide");else{var s=document.querySelectorAll(".eventObj.myRouteEvents");Array.prototype.forEach.call(s,function(o){t.forEach(function(t){if(o.dataset.location==t.link){var n={url:"/img/location43x68.png",size:new google.maps.Size(43,68),scaledSize:new google.maps.Size(43,68),origin:new google.maps.Point(0,0)},a=new google.maps.Marker({position:{lat:parseFloat(t.lat),lng:parseFloat(t.lng)},map:e,icon:n,optimized:!0,title:"First Infowindow!"}),s=t.link,i='<a href="/location/'+s+'" class="popupButton">',r='<a href="https://maps.google.com?saddr=Current+Location&daddr='+t.lat+","+t.lng+'" class="popupButton buttonRoute" target="blank">',p='<div id="content"><h1>'+t.title+"</h1><p>"+t.address+'</p><div class="popupButtons ">'+r+"Route</a>"+i+"Evenementen</a></div></div>";google.maps.event.addListener(a,"click",function(){l.setContent(p),l.open(e,a)}),a.setMap(e)}})})}})},r=function(e){nfest.helpers.getVenueLocations(function(t,o){var n=t,a=new google.maps.InfoWindow;n.forEach(function(t){var o={url:"/img/location43x68.png",size:new google.maps.Size(43,68),scaledSize:new google.maps.Size(43,68),origin:new google.maps.Point(0,0)},n=new google.maps.Marker({position:{lat:parseFloat(t.lat),lng:parseFloat(t.lng)},map:e,icon:o,optimized:!0,title:"First Infowindow!"}),l=t.link,s='<a href="/location/'+l+'" class="popupButton">',i='<a href="https://maps.google.com?saddr=Current+Location&daddr='+t.lat+","+t.lng+'" class="popupButton buttonRoute">',r='<div id="content"><h1>'+t.title+"</h1><p>"+t.address+'</p><div class="popupButtons ">'+i+"Route</a>"+s+"Evenementen</a></div></div>";google.maps.event.addListener(n,"click",function(){a.setContent(r),a.open(e,n)}),n.setMap(e)})})};return{mapLauncher:o,jsActivate:n,mapStyle:a,updatePosition:l,watchLocation:s,venueMarkersMyRoute:i,venueMarkersAllLocations:r}}(),nfest.map.mapLauncher();